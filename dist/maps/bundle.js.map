{"version":3,"sources":["app.js","define.js","log.js","auth.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../bundle.js","sourcesContent":["$(document).ready(function() {\r\n\tlet WorkoutLog = (function($, undefined) {\r\n\t\tlet API_BASE = \"https://track-my-workouts.herokuapp.com/\"\r\n\t\tlet userDefinitions= []\r\n\r\n\t\t//private, gonna stay in the expression. \r\n\t\tlet setAuthHeader = function(sessionToken) {\r\n\t\t\twindow.localStorage.setItem(\"sessionToken\", sessionToken)\r\n\t\t\t//set the auth header\r\n\t\t\t//this can be done on individual calls\r\n\t\t\t//here we showcase ajaxsetup as a global tool\r\n\t\t\t$.ajaxSetup({\r\n\t\t\t\t\"headers\": {\r\n\t\t\t\t\t\"Authorization\": sessionToken\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t// public. this will be exposed to the rest of the world\r\n\t\treturn {\r\n\t\t\tAPI_BASE: API_BASE,\r\n\t\t\tsetAuthHeader: setAuthHeader\r\n\t\t}\r\n\t})(jQuery)\r\n\r\n\t$(\".nav-tabs a[data-toggle=tab]\").on(\"click\", function(e) {\r\n\t\tlet token = window.localStorage.getItem('sessionToken')\r\n\t\tif ($(this).hasClass(\"disabled\") && !token) {\r\n\t\t\te.preventDefault()\r\n\t\t\treturn false\r\n\t\t}\r\n\t})\r\n\t//bind ab change events\r\n\t$('a[data-toggle=\"tab\"]').on('shown.bs.tab', function(e) {\r\n\t\tlet target = $(e.target).attr(\"href\")\r\n\t\tif (target === '#log') { ///when checking for equality, ids must be '#id'\r\n\t\t\tWorkoutLog.log.setDefinitions()\r\n\t\t}\r\n\t\tif (target === '#updateLog') {\r\n\t\t\tWorkoutLog.log.setDefinitions()\r\n\t\t}\r\n\t\tif (target === '#history') {\r\n\t\t\tWorkoutLog.log.setHistory()\r\n\t\t}\r\n\t})\r\n\t//bind enter key\r\n\t$(document).on('keypress', function(e) {\r\n\t\tif (e.which === 13) {\r\n\t\t\tif ($(signupModal).is(':visible')) {\r\n\t\t\t\t$(signup).trigger('click')\r\n\t\t\t}\r\n\t\t\tif ($(loginModal).is(':visible')) {\r\n\t\t\t\t$(login).trigger('click')\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\t//set header\r\n\tlet token = window.localStorage.getItem(\"sessionToken\")\r\n\tif (token) {\r\n\t\tWorkoutLog.setAuthHeader(token)\r\n\t}\r\n\r\n\t//expose this to the other workoutlog modules \r\n\twindow.WorkoutLog = WorkoutLog\r\n})\r\n\r\n// this file gets the info from api/test. it works because onready it runs let test and gets","$(function() {\r\n\t$.extend(WorkoutLog, {\r\n\t\tdefinition: {\r\n\t\t\tuserDefinitions: [],\r\n\r\n\t\t\tcreate: function() {\r\n\t\t\t\tlet def = {\r\n\t\t\t\t\tdesc: $(defDescription).val(),\r\n\t\t\t\t\ttype: $(defLogtype).val()\r\n\t\t\t\t}\r\n\t\t\t\tlet postData = { definition: def}\r\n\t\t\t\tlet define = $.ajax({\r\n\t\t\t\t\ttype: \"POST\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"definition\",\r\n\t\t\t\t\tdata: JSON.stringify(postData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t})\r\n\r\n\t\t\t\tdefine.done(function(data) {\r\n\t\t\t\t\tWorkoutLog.definition.userDefinitions.push(data.definition)\r\n\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t$(defDescription).val(\"\")\r\n\t\t\t\t$(defLogtype).val(\"\")\r\n\t\t\t\t$('a[href=\"#log\"]').tab(\"show\")\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tfetchAll: function() {\r\n\t\t\t\tlet fetchDefs = $.ajax({\r\n\t\t\t\t\ttype: \"GET\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"definition\",\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\"authorization\": window.localStorage.getItem('sessionToken')\r\n\t\t\t\t\t}\r\n\t\t\t\t}).done (function(data) {\r\n\t\t\t\t\tWorkoutLog.definition.userDefinitions = data\r\n\t\t\t\t\tconsole.log(WorkoutLog.definition)\r\n\t\t\t\t})\r\n\t\t\t\t.fail(function(err) {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t// bindings\r\n\t$(defSave).on('click', WorkoutLog.definition.create)\r\n\t//fetch definition if we already are authenticated and refreshed\r\n\tif (window.localStorage.getItem('sessionToken')) {\r\n\t\tWorkoutLog.definition.fetchAll()\r\n\t}\r\n})","$(function() {\r\n\t\tconsole.log(WorkoutLog.definition)\r\n\t$.extend(WorkoutLog, {\r\n\t\tlog: {\r\n\t\t\tworkouts: [],\r\n\t\t\tsetDefinitions: function() {\r\n\t\t\t\tlet defs = WorkoutLog.definition.userDefinitions\r\n\t\t\t\tconsole.log(defs, \"defs\")\r\n\t\t\t\tlet len = defs.length\r\n\t\t\t\tlet opts = \"\"\r\n\t\t\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\t\t\topts += \"<option value='\" + defs[i].id +\"'>\" + defs[i].description + \"</option>\"\r\n\t\t\t\t}\r\n\t\t\t\t$(logDefinition).children().remove()\r\n\t\t\t\t$(logDefinition).append(opts)\r\n\t\t\t\t$(updateDefinition).children().remove()\r\n\t\t\t\t$(updateDefinition).append(opts)\r\n\t\t\t},\r\n\t\t\tsetHistory: function() {\r\n\t\t\t\tlet history = WorkoutLog.log.workouts\r\n\t\t\t\tconsole.log(history, \"history\")\r\n\t\t\t\tlet len = history.length\r\n\t\t\t\tlet lis = \"\"\r\n\t\t\t\tconsole.log('setHistoryrunning')\r\n\t\t\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\t\t\tlis += \"<li class='list-group-item'>\" + \r\n\t\t\t\t\thistory[i].def + \" - \" + \r\n\t\t\t\t\thistory[i].result + \" \" +\r\n\t\t\t\t\t\"<div class='pull-right'>\" +\r\n\t\t\t\t\t\t\"<button id='\" + history[i].id + \"' class='update'><strong>U</strong></button>\" +\r\n\t\t\t\t\t\t\"<button id='\" + history[i].id + \"' class='remove'><string>X</strong></button>\" +\r\n\t\t\t\t\t\"</div></li>\"\r\n\t\t\t\t}\r\n\t\t\t\t$(historyList).children().remove()\r\n\t\t\t\t$(historyList).append(lis)\r\n\t\t\t},\r\n\t\t\tcreate: function () {\r\n\t\t\t\tlet itsLog = {\r\n\t\t\t\t\tdesc: $(logDescription).val(),\r\n\t\t\t\t\tresult: $(logResult).val(),\r\n\t\t\t\t\tdef: $('#logDefinition option:selected').text()\r\n\t\t\t\t}\r\n\t\t\t\tlet postData = {log: itsLog}\r\n\t\t\t\tconsole.log(postData)\r\n\t\t\t\tlet logger = $.ajax({\r\n\t\t\t\t\ttype: \"POST\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\r\n\t\t\t\t\tdata: JSON.stringify(postData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t})\r\n\t\t\t\tlogger.done(function(data) {\r\n\t\t\t\t\tWorkoutLog.log.workouts.push(data)\r\n\t\t\t\t\t$(logDescription).val(\"\")\r\n\t\t\t\t\t$(logResult).val(\"\")\r\n\t\t\t\t\t$('a[href=\"#history\"]').tab(\"show\")\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetWorkout: function () {\r\n\t\t\t\tconsole.log('HEY THIS IS WORKING PROPERLY')\r\n\t\t\t\tlet thisLog = {id: $(this).attr('id')}\r\n\t\t\t\tconsole.log(thisLog)\r\n\t\t\t\tconsole.log($(this))\r\n\t\t\t\tlogID = thisLog.id\r\n\t\t\t\tlet updateData = { log: thisLog }\r\n\t\t\t\tlet getLog = $.ajax({\r\n\t\t\t\t\ttype: \"GET\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log/\" + logID,\r\n\t\t\t\t\tdata: JSON.stringify(updateData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t})\r\n\t\t\t\tgetLog.done(function(data) {\r\n\t\t\t\t\t$('a[href=\"#updateLog\"]').tab(\"show\")\r\n\t\t\t\t\t$(updateResult).val(data.result)\r\n\t\t\t\t\t$(updateDescription).val(data.description)\r\n\t\t\t\t\t$(updateID).val(data.id)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tupdateWorkout: function() {\r\n\t\t\t\tconsole.log('test')\r\n\t\t\t\t// $(update).text(\"Update\")\r\n\t\t\t\tlet updateLog = {\r\n\t\t\t\t\tid: $(updateID).val(),\r\n\t\t\t\t\tdesc: $(updateDescription).val(),\r\n\t\t\t\t\tresult: $(updateResult).val(),\r\n\t\t\t\t\tdef: $(\"#updateDefinition option:selected\").text()\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(updateLog, \"updateLog\")\r\n\t\t\t\tfor(var i = 0; i < WorkoutLog.log.workouts.length; i++){\r\n\t\t\t\t\tif(WorkoutLog.log.workouts[i].id == updateLog.id){\r\n\t\t\t\t\t\tWorkoutLog.log.workouts.splice(i, 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tWorkoutLog.log.workouts.push(updateLog)\r\n\t\t\t\tlet updateLogData = { log: updateLog }\r\n\t\t\t\tlet updater = $.ajax({\r\n\t\t\t\t\ttype: \"PUT\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\r\n\t\t\t\t\tdata: JSON.stringify(updateLogData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t})\r\n\r\n\t\t\t\tupdater.done(function(data) {\r\n\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t\t$(updateDescription).val(\"\")\r\n\t\t\t\t\t$(updateResult).val(\"\")\r\n\t\t\t\t\t$('a[href=\"#history\"]').tab(\"show\")\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdelete: function(){\r\n\t\t\t\tlet thisLog = {\r\n\t\t\t\t\t//\"this\" is the button on the li\r\n\t\t\t\t\t//.attr(\"id\") targets teh value of the id attribute of the button\r\n\t\t\t\t\tid: $(this).attr(\"id\")\r\n\t\t\t\t}\r\n\t\t\t\tlet deleteData = {log: thisLog}\r\n\t\t\t\tlet deleteLog = $.ajax({\r\n\t\t\t\t\ttype: \"DELETE\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\r\n\t\t\t\t\tdata: JSON.stringify(deleteData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t})\r\n\t\t\t\t//removes list iem. references button then grabvs cloesest li\r\n\t\t\t\t$(this).closest('li').remove()\r\n\r\n\t\t\t\tfor (let i = 0; i <WorkoutLog.log.workouts.length; i++) {\r\n\t\t\t\t\tif(WorkoutLog.log.workouts[i].id = thisLog.id) {\r\n\t\t\t\t\t\tWorkoutLog.log.workouts.splice(i, 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdeleteLog.fail(function() {\r\n\t\t\t\t\tconsole.log('nope, you didn\\'t delete it, an error occurred')\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tfetchAll: function() {\r\n\t\t\t\tlet fetchDefs = $.ajax({\r\n\t\t\t\t\ttype: \"GET\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\"authorization\": \r\n\t\t\t\t\t\twindow.localStorage.getItem(\"sessionToken\")\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.done(function(data) {\r\n\t\t\t\t\tconsole.log('test log.jsworkouts')\r\n\t\t\t\t\t\tWorkoutLog.log.workouts = data \r\n\t\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t})\r\n\t\t\t\t.fail(function(err) {\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\t$(logSave).on('click', WorkoutLog.log.create)\r\n\t$(historyList).on('click', '.remove', WorkoutLog.log.delete)\r\n\t$(logUpdate).on('click', WorkoutLog.log.updateWorkout)\r\n\t$(historyList).on( 'click', '.update', WorkoutLog.log.getWorkout)\r\n\t// $(updateDefinition).on( 'click', '.update', WorkoutLog.log.getWorkout)\r\n\t// WorkoutLog.log.getWorkout\r\n\t$(history).on('click').tab('show')\r\n\r\n\tif(window.localStorage.getItem('sessionToken')) {\r\n\t\tWorkoutLog.log.fetchAll()\r\n\t}\r\n})\r\n","$(function(){\r\n\t$.extend(WorkoutLog, { //.extend pulls the contents of app.js's WorkoutLog variable\r\n\t\t//signup method\r\n\t\tsignup: function(){\r\n\t\t\t//username and password variables\r\n\t\t\tlet username = $(su_username).val()\r\n\t\t\tlet password = $(su_password).val()\r\n\t\t//user object\r\n\t\t\tlet user = {user: \r\n\t\t\t\t{\r\n\t\t\t\t\tusername: username,\r\n\t\t\t\t\tpassword: password\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//signup post\r\n\t\t\tlet signup = $.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t\turl: WorkoutLog.API_BASE + \"user\",\r\n\t\t\t\tdata: JSON.stringify(user),\r\n\t\t\t\tcontentType:\"application/json\"\r\n\t\t\t})\r\n\t\t\t//signup done/fail\r\n\t\t\t//.done() Promise\r\n            //Runs asynchronously\r\n\t\t\tsignup\r\n\t\t\t.done(function(data) {\r\n\t\t\t\tif (data.sessionToken) {\r\n\t\t\t\t\tWorkoutLog.setAuthHeader(data.sessionToken)\r\n\t\t\t\t\tconsole.log(\"you made it\")\r\n\t\t\t\t\tconsole.log(data.sessionToken)\r\n\t\t\t\t\tWorkoutLog.definition.fetchAll()\r\n\t\t\t\t\tWorkoutLog.log.fetchAll()\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(signupModal).modal(\"hide\")\r\n\t\t\t\t$('.disabled').removeClass(\"disabled\")\r\n\t\t\t\t$(loginout).text(\"Logout\")\r\n\t\t\t\t$('a[href=\"#define\"]').tab('show')\r\n\t\t\t\t$(su_username).val(\"\")\r\n\t\t\t\t$(su_password).val(\"\")\t\t\t\r\n\t\t\t})\r\n\t\t\t.fail(function() {\r\n\t\t\t\t$(su_error).text(\"There was an issue with sign up\").show()\r\n\t\t\t})\r\n\t\t\t.always(function(){\r\n\t\t\t\talert(\"hey play this cool game while you sign up\")\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t//login method\r\n\t\tlogin: function(){\r\n\t\t\t// login variables\r\n\t\t\tlet username = $(li_username).val()\r\n\t\t\tlet password = $(li_password).val()\r\n\t\t\tlet user = {user: \r\n\t\t\t\t{\r\n\t\t\t\t\tusername: username,\r\n\t\t\t\t\tpassword: password\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//login POST\r\n\t\t\tlet login = $.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t\turl: WorkoutLog.API_BASE + \"login\",\r\n\t\t\t\tdata: JSON.stringify(user),\r\n\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t})\r\n\t\t\tlogin\r\n\t\t\t.done(function(data) {\r\n\t\t\t\tif (data.sessionToken) {\r\n\t\t\t\t\tWorkoutLog.setAuthHeader(data.sessionToken)\r\n\t\t\t\t\tconsole.log('you logged in!')\r\n\t\t\t\t\tWorkoutLog.definition.fetchAll()\r\n\t\t\t\t\tWorkoutLog.log.fetchAll()\r\n\t\t\t\t}\r\n\t\t\t\t$(loginModal).modal('hide')\r\n\t\t\t\t$('.disabled').removeClass('disabled')\r\n\t\t\t\t$(loginout).text('Logout')\r\n\t\t\t\t$('a[href=\"#define\"]').tab('show')\r\n\t\t\t\t$(li_username).val(\"\")\r\n\t\t\t\t$(li_password).val(\"\")\r\n\t\t\t})\r\n\t\t\t.fail(function() {\r\n\t\t\t\t$(li_error).text(\"There was an issue with log in\").show()\r\n\t\t\t})\r\n\t\t},\r\n\t\t//loginout method\r\n\t\tloginout: function() {\r\n\t\t\tif (window.localStorage.getItem('sessionToken')) {\r\n\t\t\t\twindow.localStorage.removeItem('sessionToken')\r\n\t\t\t\t$(loginout).text(\"Login\")\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\t//bind events\r\n\t$(signup).on('click', WorkoutLog.signup)\r\n\t$(login).on('click', WorkoutLog.login)\r\n\t$(loginout).on('click', WorkoutLog.loginout)\r\n\r\n\tif (window.localStorage.getItem('sessionToken')) {\r\n\t\t$(loginout).text(\"Logout\")\r\n\t}\r\n})"]}