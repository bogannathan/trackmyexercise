{"version":3,"sources":["app.js","define.js","log.js","auth.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../bundle.js","sourcesContent":["let idleTime = 0;\r\n$(document).ready(function() {\r\nlet retrievedProfile\r\n$(logDate).datepicker({ dateFormat: 'yy/mm/dd' })\r\n\r\n\tlet WorkoutLog = (function($, undefined) {\r\n\t\t// let API_BASE = \"https://track-my-workouts.herokuapp.com/api/\"\r\n\t\tlet API_BASE = \"http://localhost:3000/api/\"\r\n\t\tlet userDefinitions= []\r\n\t\t//private, gonna stay in the expression. \r\n\t\tlet setAuthHeader = function(sessionToken) {\r\n\t\t\twindow.localStorage.setItem(\"sessionToken\", sessionToken)\r\n\t\t\t//set the auth header\r\n\t\t\t//this can be done on individual calls\r\n\t\t\t//here we showcase ajaxsetup as a global tool\r\n\t\t\t$.ajaxSetup({\r\n\t\t\t\t\"headers\": {\r\n\t\t\t\t\t\"Authorization\": sessionToken\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t// public. this will be exposed to the rest of the world\r\n\t\treturn {\r\n\t\t\tAPI_BASE: API_BASE,\r\n\t\t\tsetAuthHeader: setAuthHeader\r\n\t\t}\r\n\t})(jQuery)\r\n\r\n\t$(\".nav-tabs a[data-toggle=tab]\").on(\"click\", function(e) {\r\n\t\tlet token = window.localStorage.getItem('sessionToken')\r\n\t\tif ($(this).hasClass(\"disabled\") && !token) {\r\n\t\t\te.preventDefault()\r\n\t\t\treturn false\r\n\t\t}\r\n\t\tif (!token && $(this).attr('id') != \"loginout\") {\r\n\t\t\talert(\"You must login first\")\r\n\t\t}\r\n\t})\r\n\t//bind ab change events\r\n\t$('a[data-toggle=\"tab\"]').on('shown.bs.tab', function(e) {\r\n\t\tlet target = $(e.target).attr(\"href\")\r\n\t\tif (target === '#log') { ///when checking for equality, ids must be '#id'\r\n\t\t\tWorkoutLog.log.setDefinitions()\r\n\t\t}\r\n\t\tif (target === '#updateLog') {\r\n\t\t\tWorkoutLog.log.setDefinitions()\r\n\t\t}\r\n\t\tif (target === '#history') {\r\n\t\t\tWorkoutLog.log.getChart()\r\n\t\t}\r\n\t})\r\n\t//bind enter key\r\n\t$(document).on('keypress', function(e) {\r\n\t\tif (e.which === 13) {\r\n\t\t\tif ($(signupModal).is(':visible')) {\r\n\t\t\t\t$(signup).trigger('click')\r\n\t\t\t}\r\n\t\t\tif ($(loginModal).is(':visible')) {\r\n\t\t\t\t$(login).trigger('click')\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\t//set header\r\n\tlet token = window.localStorage.getItem(\"sessionToken\")\r\n\tif (token) {\r\n\t\tWorkoutLog.setAuthHeader(token)\r\n\t\t$(homeNav).click()\r\n\t\t// $(loginPage).hide()\r\n\t} else {\r\n\t\t$(loginout).click()\r\n\t}\r\n\r\n\t//expose this to the other workoutlog modules \r\n\twindow.WorkoutLog = WorkoutLog\r\n\t// if(!window.localStorage.getItem('sessionToken')) {\r\n\t// \tWorkoutLog.loginout()\r\n\t// }\r\n})\r\n\r\n// this file gets the info from api/test. it works because onready it runs let test and gets","$(function() {\r\n\t$.extend(WorkoutLog, {\r\n\t\tdefinition: {\r\n\t\t\tuserDefinitions: [],\r\n\r\n\t\t\tcreate: function() {\r\n\t\t\t\tlet def = {\r\n\t\t\t\t\tdesc: $(defDescription).val(),\r\n\t\t\t\t\ttype: $(defLogtype).val()\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlet postData = { definition: def}\r\n\t\t\t\tlet define = $.ajax({\r\n\t\t\t\t\ttype: \"POST\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"definition\",\r\n\t\t\t\t\tdata: JSON.stringify(postData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t})\r\n\r\n\t\t\t\tdefine.done(function(data) {\r\n\t\t\t\t\tWorkoutLog.definition.userDefinitions.push(data.definition)\r\n\t\t\t\t$(defDescription).val(\"\")\r\n\t\t\t\t$(defLogtype).val(\"\")\r\n\t\t\t\t$('a[href=\"#log\"]').tab(\"show\")\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcheckForm: function() {\r\n\t\t\t\tif ($(defDescription).val() != \"\") {\r\n\t\t\t\t\tWorkoutLog.definition.create()\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert(\"Please fill out all fields\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfetchAll: function() {\r\n\t\t\t\tlet fetchDefs = $.ajax({\r\n\t\t\t\t\ttype: \"GET\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"definition\",\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\"authorization\": window.localStorage.getItem('sessionToken')\r\n\t\t\t\t\t}\r\n\t\t\t\t}).done (function(data) {\r\n\t\t\t\t\tWorkoutLog.definition.userDefinitions = data\r\n\t\t\t\t\t// console.log(data)\r\n\t\t\t\t})\r\n\t\t\t\t.fail(function(err) {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t// bindings\r\n\t$(defSave).on('click', WorkoutLog.definition.checkForm)\r\n\t//fetch definition if we already are authenticated and refreshed\r\n\tif (window.localStorage.getItem('sessionToken')) {\r\n\t\tWorkoutLog.definition.fetchAll()\r\n\t}\r\n})","$(function() {\r\n\t$.extend(WorkoutLog, {\r\n\t\tlog: {\r\n\t\t\tworkouts: [],\r\n\t\t\tsetDefinitions: function() {\r\n\t\t\t\tlet defs = WorkoutLog.definition.userDefinitions\r\n\t\t\t\tlet len = defs.length\r\n\t\t\t\tlet opts = \"\"\r\n\t\t\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\t\t\topts += \"<option value='\" + defs[i].id +\"'>\" + defs[i].description + \"</option>\"\r\n\t\t\t\t}\r\n\t\t\t\t$(logDefinition).children().remove()\r\n\t\t\t\t$(logDefinition).append(opts)\r\n\t\t\t\t$(updateDefinition).children().remove()\r\n\t\t\t\t$(updateDefinition).append(opts)\r\n\t\t\t},\r\n\t\t\tsetHistory: function(data) {\r\n\t\t\t\tlet history = data\r\n\t\t\t\tlet len = data.length\r\n\t\t\t\tlet lis = \"\"\r\n\t\t\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\t\t\tlis += \"<li class='list-group-item' style='height: auto;'>\" + \r\n\t\t\t\t\thistory[i].def + \", \" + \r\n\t\t\t\t\thistory[i].date + \" - \" +\r\n\t\t\t\t\thistory[i].time + \" minutes\" +\r\n\t\t\t\t\t\"<div style='float: right'>\" +\r\n\t\t\t\t\t\t\"<a style='margin-left: 30px !important; height: 100%;' id='\" + history[i].id + \"' class='update logHistoryLink'><strong>U</strong></a>\" +\r\n\t\t\t\t\t\t\"<a id='\" + history[i].id + \"' class='remove logHistoryLink'><strong>X</strong></a>\" +\r\n\t\t\t\t\t\"</div></li>\"\r\n\t\t\t\t}\r\n\t\t\t\t$(historyList).children().remove()\r\n\t\t\t\t$(historyList).append(lis)\r\n\t\t\t},\r\n\t\t\tcheckForm: function() {\r\n\t\t\t\tif ($(logDescription).val() != \"\" && $(logResult).val() != \"\") {\r\n\t\t\t\t\tWorkoutLog.log.create()\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert(\"Please fill out all fields\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcreate: function () {\r\n\t\t\t\tlet itsLog = {\r\n\t\t\t\t\tdesc: $(logDescription).val(),\r\n\t\t\t\t\tresult: $(logResult).val(),\r\n\t\t\t\t\tdate: $(logDate).val(),\r\n\t\t\t\t\tdef: $('#logDefinition option:selected').text()\r\n\t\t\t\t}\r\n\t\t\t\tlet postData = {log: itsLog}\r\n\t\t\t\tlet logger = $.ajax({\r\n\t\t\t\t\ttype: \"POST\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\r\n\t\t\t\t\tdata: JSON.stringify(postData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t})\r\n\t\t\t\tlogger.done(function(data) {\r\n\t\t\t\t\tWorkoutLog.log.workouts.push(data)\r\n\t\t\t\t\t$(logDescription).val(\"\")\r\n\t\t\t\t\t$(logResult).val(\"\")\r\n\t\t\t\t\t$(logDate).val(\"\")\r\n\t\t\t\t\t// $('a[href=\"#history\"]').tab(\"show\")\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetWorkout: function () {\r\n\t\t\t\tlet thisLog = {id: $(this).attr('id')}\r\n\t\t\t\tlogID = thisLog.id\r\n\t\t\t\tlet updateData = { log: thisLog }\r\n\t\t\t\tlet getLog = $.ajax({\r\n\t\t\t\t\ttype: \"GET\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log/\" + logID,\r\n\t\t\t\t\tdata: JSON.stringify(updateData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t})\r\n\t\t\t\tgetLog.done(function(data) {\r\n\t\t\t\t\t$('a[href=\"#updateLog\"]').tab(\"show\")\r\n\t\t\t\t\t$(updateResult).val(data.result)\r\n\t\t\t\t\t$(updateDescription).val(data.description)\r\n\t\t\t\t\t$(updateID).val(data.id)\r\n\t\t\t\t\t$(updateLogDate).val(data.date)\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\tgetChart: function() {\r\n\t\t\t\tif (WorkoutLog.log.workouts.length < 3) {\r\n\t\t\t\t\t$(chartHeader).html(\"Please enter more logs to see a chart of data\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(chartHeader).html(\"Progression of time spent running\")\r\n\t\t\t\t\tlet ctx = document.getElementById(\"runningtimeChartTab\").getContext('2d');\r\n\t\t\t\t\tlet lengthArray = []\r\n\t\t\t\t\tfor (let result of WorkoutLog.log.workouts) {\r\n\t\t\t\t\t\tlet time = result.result\r\n\t\t\t\t\t\tlet id = result.id\r\n\t\t\t\t\t\tlet def = result.def\r\n\t\t\t\t\t\tlet lengthDateOrder = result.date.replace(/\\D/g, '')\r\n\t\t\t\t\t\tlengthArray.push({\r\n\t\t\t\t\t\t\ttime,\r\n\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\tdef,\r\n\t\t\t\t\t\t\tlengthDateOrder\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlengthArray.sort(function(a, b) {\r\n\t    \t\t\t\treturn parseFloat(a.lengthDateOrder) - parseFloat(b.lengthDateOrder);\r\n\t\t\t\t\t})\r\n\t\t\t\t\tlet newlengthArray = lengthArray.map(function(a) {return a.time;})\r\n\r\n\r\n\t\t\t\t\tlet dateArray = []\r\n\t\t\t\t\tfor(let result of WorkoutLog.log.workouts) {\r\n\t\t\t\t\t\tlet date = result.date\r\n\t\t\t\t\t\tlet dateOrder = result.date.replace(/\\D/g, '')\r\n\t\t\t\t\t\tdateArray.push({\r\n\t\t\t\t\t\t\tdate,\r\n\t\t\t\t\t\t\tdateOrder\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdateArray.sort(function(a, b) {\r\n\t    \t\t\t\treturn parseFloat(a.dateOrder) - parseFloat(b.dateOrder);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet newdateArray = dateArray.map(function(a) {return a.date;})\r\n\t\t\t\t\tlet finalArray = []\r\n\t\t\t\t\tfor (let i in dateArray) {\r\n\t\t\t\t\t\tlet obj ={}\r\n\t\t\t\t\t\tObject.assign(obj, dateArray[i], lengthArray[i])\r\n\t\t\t\t\t\tfinalArray.push(obj)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tWorkoutLog.log.setHistory(finalArray)\r\n\t\t\t\t\tlet myChart = new Chart(ctx, {\r\n\t\t\t\t\t    type: 'bar',\r\n\t\t\t\t\t    data: {\r\n\t\t\t\t\t        labels: newdateArray,\r\n\t\t\t\t\t        datasets: [{\r\n\t\t\t\t\t            label: 'Time spent running (minutes)',\r\n\t\t\t\t\t            data: newlengthArray,\r\n\t\t\t\t\t            backgroundColor: [\r\n\t\t\t\t\t                'rgba(255, 99, 132, 0.2)',\r\n\t\t\t\t\t                'rgba(54, 162, 235, 0.2)',\r\n\t\t\t\t\t                'rgba(255, 206, 86, 0.2)',\r\n\t\t\t\t\t                'rgba(75, 192, 192, 0.2)',\r\n\t\t\t\t\t                'rgba(153, 102, 255, 0.2)',\r\n\t\t\t\t\t                'rgba(255, 159, 64, 0.2)'\r\n\t\t\t\t\t            ],\r\n\t\t\t\t\t            borderColor: [\r\n\t\t\t\t\t                'rgba(255,99,132,1)',\r\n\t\t\t\t\t                'rgba(54, 162, 235, 1)',\r\n\t\t\t\t\t                'rgba(255, 206, 86, 1)',\r\n\t\t\t\t\t                'rgba(75, 192, 192, 1)',\r\n\t\t\t\t\t                'rgba(153, 102, 255, 1)',\r\n\t\t\t\t\t                'rgba(255, 159, 64, 1)'\r\n\t\t\t\t\t            ],\r\n\t\t\t\t\t            borderWidth: 1\r\n\t\t\t\t\t        }]\r\n\t\t\t\t\t    },\r\n\t\t\t\t\t    options: {\r\n\t\t\t\t\t        scales: {\r\n\t\t\t\t\t            yAxes: [{\r\n\t\t\t\t\t                ticks: {\r\n\t\t\t\t\t                    beginAtZero:true\r\n\t\t\t\t\t                }\r\n\t\t\t\t\t            }]\r\n\t\t\t\t\t        }\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdateWorkout: function() {\r\n\t\t\t\t// $(update).text(\"Update\")\r\n\t\t\t\tlet updateLog = {\r\n\t\t\t\t\tid: $(updateID).val(),\r\n\t\t\t\t\tdesc: $(updateDescription).val(),\r\n\t\t\t\t\tresult: $(updateResult).val(),\r\n\t\t\t\t\tdate: $(updateLogDate).val(),\r\n\t\t\t\t\tdef: $(\"#updateDefinition option:selected\").text()\r\n\t\t\t\t}\r\n\t\t\t\tfor(var i = 0; i < WorkoutLog.log.workouts.length; i++){\r\n\t\t\t\t\tif(WorkoutLog.log.workouts[i].id == updateLog.id){\r\n\t\t\t\t\t\tWorkoutLog.log.workouts.splice(i, 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tWorkoutLog.log.workouts.push(updateLog)\r\n\t\t\t\tlet updateLogData = { log: updateLog }\r\n\t\t\t\tlet updater = $.ajax({\r\n\t\t\t\t\ttype: \"PUT\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\r\n\t\t\t\t\tdata: JSON.stringify(updateLogData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t})\r\n\r\n\t\t\t\tupdater.done(function(data) {\r\n\t\t\t\t\t$(updateDescription).val(\"\")\r\n\t\t\t\t\t$(updateResult).val(\"\")\r\n\t\t\t\t\t$('a[href=\"#history\"]').tab(\"show\")\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdelete: function(){\r\n\t\t\t\tlet thisLog = {\r\n\t\t\t\t\t//\"this\" is the button on the li\r\n\t\t\t\t\t//.attr(\"id\") targets teh value of the id attribute of the button\r\n\t\t\t\t\tid: $(this).attr(\"id\")\r\n\t\t\t\t}\r\n\t\t\t\tlet deleteData = {log: thisLog}\r\n\t\t\t\tlet deleteLog = $.ajax({\r\n\t\t\t\t\ttype: \"DELETE\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\r\n\t\t\t\t\tdata: JSON.stringify(deleteData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t})\r\n\t\t\t\t//removes list iem. references button then grabvs cloesest li\r\n\t\t\t\t$(this).closest('li').remove()\r\n\r\n\t\t\t\tfor (let i = 0; i <WorkoutLog.log.workouts.length; i++) {\r\n\t\t\t\t\tif(WorkoutLog.log.workouts[i].id = thisLog.id) {\r\n\t\t\t\t\t\tWorkoutLog.log.workouts.splice(i, 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdeleteLog.fail(function() {\r\n\t\t\t\t\tconsole.log('nope, you didn\\'t delete it, an error occurred')\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tfetchAll: function() {\r\n\t\t\t\tlet fetchDefs = $.ajax({\r\n\t\t\t\t\ttype: \"GET\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\"authorization\": \r\n\t\t\t\t\t\twindow.localStorage.getItem(\"sessionToken\")\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.done(function(data) {\r\n\t\t\t\t\t\tWorkoutLog.log.workouts = data \r\n\t\t\t\t})\r\n\t\t\t\t.fail(function(err) {\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\t$(logSave).on('click', WorkoutLog.log.checkForm)\r\n\tWorkoutLog.log.getChart()\r\n\t$(historyList).on('click', '.remove', WorkoutLog.log.delete)\r\n\t$(logUpdate).on('click', WorkoutLog.log.updateWorkout)\r\n\t$(historyList).on( 'click', '.update', WorkoutLog.log.getWorkout)\r\n\t// $(updateDefinition).on( 'click', '.update', WorkoutLog.log.getWorkout)\r\n\t// WorkoutLog.log.getWorkout\r\n\t$(history).on('click').tab('show')\r\n\r\n\tif(window.localStorage.getItem('sessionToken')) {\r\n\t\tWorkoutLog.log.fetchAll()\r\n\t}\r\n})\r\n","$(function(){\r\n\tlet userProfile;\r\n\r\n\t$.extend(WorkoutLog, { //.extend pulls the contents of app.js's WorkoutLog variable\r\n\t\t//signup method\r\n\t\tcheckPassword: function(){\r\n\t\t\tif ($(su_password).val() !== $(su_confirmpassword).val()) {\r\n\t\t\talert('Passwords do not match')\r\n\t\t\t} else {\r\n\t\t\t\tWorkoutLog.signup()\r\n\t\t\t}\r\n\t\t},\r\n\t\tcheckForm: function() {\r\n\t\t\tif ($(su_username).val() != \"\" && $(su_confirmpassword).val() != \"\" && $(su_password).val() != \"\" && $(su_fullname).val() != \"\" && $(su_summary).val() != \"\" && $(su_age).val() != \"\" && $(su_gender).val() != \"\") {\r\n\t\t\t\tWorkoutLog.checkPassword()\r\n\t\t\t} else {\r\n\t\t\t\talert(\"Please fill out all fields\")\r\n\t\t\t}\r\n\t\t},\r\n\t\tsignup: function(){\r\n\r\n\t\t\tlet username = $(su_username).val()\r\n\t\t\tlet password = $(su_password).val()\r\n\t\t\tlet fullname = $(su_fullname).val()\r\n\t\t\tlet summary = $(su_summary).val()\r\n\t\t\tlet age = $(su_age).val()\r\n\t\t\tlet gender = $(su_gender).val()\r\n\t\t//user object\r\n\t\t\tlet user = {user: \r\n\t\t\t\t{\r\n\t\t\t\t\tusername: username,\r\n\t\t\t\t\tpassword: password,\r\n\t\t\t\t\tfullname: fullname,\r\n\t\t\t\t\tsummary: summary,\r\n\t\t\t\t\tage: age,\r\n\t\t\t\t\tgender: gender\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//signup post\r\n\t\t\tlet signup = $.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t\turl: WorkoutLog.API_BASE + \"user\",\r\n\t\t\t\tdata: JSON.stringify(user),\r\n\t\t\t\tcontentType:\"application/json\"\r\n\t\t\t})\r\n\t\t\t//signup done/fail\r\n\t\t\t//.done() Promise\r\n            //Runs asynchronously\r\n\t\t\tsignup\r\n\t\t\t.done(function(data) {\r\n\t\t\t\tif (data.sessionToken) {\r\n\t\t\t\t\tWorkoutLog.setAuthHeader(data.sessionToken)\r\n\t\t\t\t\tWorkoutLog.definition.fetchAll()\r\n\t\t\t\t\tWorkoutLog.log.fetchAll()\r\n\t\t\t\t}\r\n\t\t\t\t$(signupModal).modal(\"hide\")\r\n\t\t\t\t$('.disabled').removeClass(\"disabled\")\r\n\t\t\t\t$(loginout).text(\"Logout\")\r\n\t\t\t\t$('a[href=\"#home\"]').tab('show')\r\n\t\t\t\t$(su_username).val(\"\")\r\n\t\t\t\t$(su_password).val(\"\")\t\r\n\t\t\t\talert(\"You have successfully signed up! Please login to continue\")\r\n\t\t\t\tWorkoutLog.loginout()\r\n\t\t\t\t// $(profileUsername).text('user:' + user.fullname)\r\n\t\t\t})\r\n\t\t\t.fail(function() {\r\n\t\t\t\t$(su_error).text(\"There was an issue with sign up\").show()\r\n\t\t\t})\r\n\t\t\t.always(function(){\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t//login method\r\n\t\tlogin: function(){\r\n\t\t\t// login variables\r\n\t\t\tlet username = $(li_username).val()\r\n\t\t\tlet password = $(li_password).val()\r\n\t\t\tuser = {user: \r\n\t\t\t\t{\r\n\t\t\t\t\tusername: username,\r\n\t\t\t\t\tpassword: password\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//login POST\r\n\t\t\tlet login = $.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t\turl: WorkoutLog.API_BASE + \"login\",\r\n\t\t\t\tdata: JSON.stringify(user),\r\n\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t})\r\n\t\t\tlogin\r\n\t\t\t.done(function(data) {\r\n\t\t\t\tif (data.sessionToken) {\r\n\t\t\t\t\tWorkoutLog.setAuthHeader(data.sessionToken)\r\n\t\t\t\t\tWorkoutLog.definition.fetchAll()\r\n\t\t\t\t\tWorkoutLog.log.fetchAll()\r\n\t\t\t\t}\r\n\t\t\t\tuser = data.user\r\n\t\t\t\tWorkoutLog.makeNavBar()\r\n\t\t\t\t$(loginModal).modal('hide')\r\n\t\t\t\t$(loginout).text('Logout')\r\n\t\t\t\t$('.invisible').removeClass('invisible') \t\r\n\t\t\t\tlocalStorage.setItem('profile', JSON.stringify(data.user));\r\n\t\t\t\t$('a[href=\"#home\"]').tab('show')\r\n\t\t\t\t$('loginPage').tab('hide')\r\n\t\t\t\tdocument.getElementById(\"home\").className = \"tab-pane active\"\r\n\t\t\t\t$(homeNav).click()\r\n\t\t\t\tWorkoutLog.profileInformation(data.user)\r\n\t\t\t\talert(\"You have successfully logged in!\")\r\n\t\t\t\twindow.location.reload(true)\r\n\t\t\t})\r\n\t\t\t.fail(function() {\r\n\t\t\t\t$(li_error).text(\"There was an issue with log in\").show()\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tmakeNavBar: function() {\r\n\t\t\t$(homeNav).html(\"Home\")\r\n\t\t\t$(defineNav).html(\"Define\")\r\n\t\t\t$(logNav).html(\"Log\")\r\n\t\t\t$(historyNav).html(\"View History\")\r\n\t\t\t$('.invisible').removeClass('invisible') \r\n\t\t},\r\n\t\t//loginout method\r\n\t\tloginout: function() {\r\n\t\t\tif (window.localStorage.getItem('sessionToken')) {\r\n\t\t\t\twindow.localStorage.clear()\r\n\t\t\t\twindow.location.reload(true)\r\n\t\t\t}\r\n\t\t}, \r\n\r\n\t\tprofileInformation: function(data) {\r\n\t\t\tlet user = data\r\n\t\t\tlet newNav = \"<li><a href='#userTab' data-toggle='tab' class=''>Welcome \" + user.fullname + \"!\" + \"</a></li>\"\r\n\t\t\t$(mainNavigation).append(newNav)\r\n\t\t\t$(profileUsername).html(user.username)\r\n\t\t\t$(profileUpdater).html(\"Click here to update profile\")\r\n\t\t\t$(profileFullname).html(user.fullname)\r\n\t\t\t$(profileSummary).html(user.summary)\r\n\t\t\t$(profileAge).html(user.age)\r\n\t\t\t$(profileGender).html(user.gender)\r\n\t\t},\r\n\t\tfillUpdateProfile: function(data) {\r\n\t\t\t$(update_username).val(data.username)\r\n\t\t\t$(update_password).val()\r\n\t\t\t$(update_confirmpassword).val()\r\n\t\t\t$(update_fullname).val(data.fullname)\r\n\t\t\t$(update_summary).val(data.summary)\r\n\t\t\t$(update_age).val(data.age)\r\n\t\t\t$(update_gender).val(data.gender)\r\n\t\t},\r\n\t\tupdateProfile: function() {\r\n\t\t\tif ($(update_password).val() == $(update_confirmpassword).val()) {\r\n\t\t\t\tif (($(update_username).val() != \"\" && $(update_confirmpassword).val() != \"\" && $(update_password).val() != \"\" && $(update_fullname).val() != \"\" && $(update_summary).val() != \"\" && $(update_age).val() != \"\" && $(update_gender).val() != \"\" && typeof($(update_age)) == integer)) {\r\n\t\t\t\t\tlet username = $(update_username).val()\r\n\t\t\t\t\tlet password = $(update_password).val()\r\n\t\t\t\t\tlet fullname = $(update_fullname).val()\r\n\t\t\t\t\tlet summary = $(update_summary).val()\r\n\t\t\t\t\tlet age = $(update_age).val()\r\n\t\t\t\t\tlet gender = $(update_gender).val()\r\n\t\t\t\t\tlet id = retrievedProfile.id\r\n\t\t\t\t//user object\r\n\t\t\t\t\tlet user = {user: \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t\t\tusername: username,\r\n\t\t\t\t\t\t\tpassword: password,\r\n\t\t\t\t\t\t\tfullname: fullname,\r\n\t\t\t\t\t\t\tsummary: summary,\r\n\t\t\t\t\t\t\tage: age,\r\n\t\t\t\t\t\t\tgender: gender\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet updater = $.ajax({\r\n\t\t\t\t\t\ttype: \"PUT\",\r\n\t\t\t\t\t\turl: WorkoutLog.API_BASE + \"user\",\r\n\t\t\t\t\t\tdata: JSON.stringify(user),\r\n\t\t\t\t\t\tcontentType:\"application/json\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tupdater.done(function(data){\r\n\t\t\t\t\t\talert(\"You have successfully updated your profile!\")\r\n\t\t\t\t\t\twindow.location.reload(true)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.fail(function(data){\r\n\t\t\t\t\t\talert(\"There was an issue with updating. Please log in and try again\")\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert(\"Please fill out all fields and confirm age is a number\")\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\talert(\"Passwords do not match\")\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\t//bind events\r\n\t$(signup).on('click', WorkoutLog.checkForm)\r\n\tlet retrievedProfile = localStorage.profile\r\n\tif (localStorage.length != 0 && typeof(retrievedProfile) !== 'object' && typeof(retrievedProfile) !== null){\r\n\t\tretrievedProfile = JSON.parse(retrievedProfile)\r\n\t\tWorkoutLog.profileInformation(retrievedProfile)\r\n\t}\r\n\t$(login).on('click', WorkoutLog.login)\r\n\t$(loginout).on('click', WorkoutLog.loginout)\r\n\tif (window.localStorage.getItem('sessionToken')) {\r\n\t\t$(loginout).text(\"Logout\")\r\n\t\tWorkoutLog.makeNavBar()\r\n\t\t$('.invisible').removeClass('invisible')\r\n\t\tdocument.getElementById(\"home\").className = \"tab-pane active\"\r\n\t\tdocument.getElementById(\"loginPage\").className = \"tab-pane fade\"\r\n\t}\r\n\t$(profileUpdater).on('click', function() {\r\n\t\tWorkoutLog.fillUpdateProfile(retrievedProfile)\r\n\t})\r\n\t$(updateProfile).on('click', WorkoutLog.updateProfile)\r\n\tlet idleInterval = setInterval(timerIncrement, 5000); // \r\n\r\n    $(this).mousemove(function (e) {\r\n        idleTime = 0;\r\n    });\r\n    $(this).keypress(function (e) {\r\n        idleTime = 0;\r\n    });\r\n\r\n\tfunction timerIncrement() {\r\n\t    idleTime += 1;\r\n\t    if (idleTime > 30 && window.localStorage.getItem('sessionToken')) { // 20 minutes\r\n\t        alert(\"You have been logged out due to inactivity.\")\r\n\t        WorkoutLog.loginout()\r\n\t    }\r\n\t}\r\n\t// if (!window.localStorage.getItem('sessionToken')) {\r\n\t// \tdocument.getElementById('loginPage').className = 'tab-pane active'\r\n\t// \tdocument.getElementById('listLoginout').className = 'active'\r\n\t// \twindow.localStorage.clear()\r\n\t// }\r\n\r\n})"]}